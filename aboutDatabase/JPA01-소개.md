# JPA 기본 용어
> JPA는 자바 객체와 DB테이블 간의 매핑을 처리하기 위한 ORM 표준

## 요소

### 엔티티 (Entity)

- 데이터 베이스에서 지속적으로 저장된 데이터를 자바 객체에 매핑한 것이다.   
- 메모리 상에 자바 객체의 인스턴스 형태로 존재하며 EntityManager에 의해 데이터 베이스의 데이터와 동기화 됨   

### 엔티티 매니저 (EntityManager)

- **필요에 따라 Entity와 데이터베이스의 데이터를 동기화한다**.   
- EntityManager에서 제공하는 Entity 조작 API를 이용해 Entity에 대해 CRUD 작업을 할 수 있다.    

### 영속성 컨텍스트 (persistence context)

- **엔티티를 영구적으로 저장하는 환경**    
- 엔티티를 저장하거나 검색할 때 엔티티 관리자는 영속성 컨스트에서 엔티티를 저장하고 관리한다.    
- 엔티티 매니저를 생성할 때 영속성 컨텍스트가 만들어진다.   
- 영속성 컨텍스트에 접근하거나 관리를 하려면 엔티티 매니저를 통해야 한다.   

## 엔티티 상태

- 비영속(new/translent) : 영속성 컨텍스트와 관련이 없는 상태     
- 영속 (managed) : 영속성 컨텍스트에 저장된 상태     
- 준영속(detached) : 영속성 컨텍스트에 저장되었다가 분리된 상태     
- 삭제 ( removed ) :영속성 컨텍스트에서 삭제된 상태     

## 영속성 전이 (persistence cascade)

- 엔티티의 영속성 상태 변화를 연관된 엔티티에도 함께 적용하는 것이다.     
- 엔티티를 저장할 떄 연관된 엔티티도 함께 저장하고 엔티티를 삭제할 때 연관된 엔티티도 함께 삭제.     

## 1차 캐시와 2차 캐시

**영속성 컨텍스트 내부에는 엔티티를 보관하는 저장소가 있는데, 이를 1차 캐시**라함.    
**데이터 베이스에 직접 접근하는 비용을 줄이기 위해 서버 내부 메모리에 캐시된 데이터 베이스를 참조**하도록 하는 것   
트랜젝션이 시작하고 종료할 때까지 1차캐시가 유효함.    
하이버네이트를 포함한 대부분의 JPA 구현체들은 애플리케이션 범위의 캐시를 지원하는데 이것을 공유 캐시 또는 2차 캐시라한다.    



출처: 실전 스프링 부터 REST API개발 + JPA + MYSQL(개정판),   
[https://gunju-ko.github.io/jpa/2019/01/14/JPA-2%EC%B0%A8%EC%BA%90%EC%8B%9C.html](!https://gunju-ko.github.io/jpa/2019/01/14/JPA-2%EC%B0%A8%EC%BA%90%EC%8B%9C.html)