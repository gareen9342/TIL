## timeout

### TCP timeout

TCP는 하나씩 들어오는 메세지를 패킷 단위로 분할한다. 수신자는 패킷의 수신에 대해 인지를 해야함.   
만약 수신자가 일정 시간동안 패킷을 받았다는 것을 인지하지 못한다면, TCP는 동일한 패킷을 재전송한다. 두 번정도 더 일어난 후에 발신자는 커넥션을 킬함

### HTTP timeout

브라우저와 같은 HTTP 클라이언트나 클라이언트의 역할을 하는 서버는 요청시 임의로 타임아웃을 세팅해아함.       
만약 응답이 일정시간동안 안오면, 보내는 쪽에서 연결을 끊는다. 

연결을 끊어주지 않으면, 연결은 계속 유지된다.
(위험을 감안하여 알아서 끊어주어야 한다. )

## timeout 발생 원인

https://stackoverflow.com/questions/29812692/node-js-server-timeout-problems-ec2-express-pm2

1. 잘못된 Content-Length : 헤더에 Content-Length를 잘못 세팅하게 될 경우에 (더 길면)
2. 인프라 부족: 어플리케이션에 더 많은 머신을 할당해주어야 할 때. (total / CPU cores) 이게 1이 넘어갈 때, 메모리가 너무 많이 사용이 될 때
3. 조용한 익셉션: 에러가 발생했는데 아무데도 로깅이 안될때, 요청이 완료되지 않고 다음으로 넘어갈 때 
4. 리소스 부족: 모든 요청이 완료를 필요할 때, 만약 이걸 하지 않으면, 연결은 오픈된 상태로 지속됨. 게다가 request object(Express - req)가 다른 오브젝트에 의해 언급된 채로 남아있을 때 각각의 오브젝트 들은 많은 메모리를 사용하게 된다. 
5. Node 이벤트 루프 결핍: 결국 여기 도달하게 되
