## 병행 프로세스

병행성 : 여러 개의 프로세스 또는 쓰레드가 동시에 실행쇠는 시스템의 특성

병행 프로세스가 실행되는 형태는 CPU의 개수에 따라 차이가 있다. 

하나의 CPU에서 병행 프로세스가 실행되는 경우는, 각 프로세스가 짧은 시간 간격으로 번갈아 가면 실행되는 인터리빙 형식으로 실행된다. 
모두 정확히 한 순간에는 하나의 프로세스가 실행되지만, 전체적으로 보면 여러 프로세스가 동시에 실행되는 병행성. 

여러 개의 CPU에서 병행 프로세스가 실행될 수도 있다. 이 경우에도, 메모이 구조에 따라 차이가 있다.

- 강결합 멀티프로세스 시스템 : 여러 CPU 간에 하나의 기억장치를 공유하며 하나의 운영체제가 모든 CPU와 하드웨어를 제어한다. 

- 약결합 멀티프로세서 시스템 : 2개 이상의 독립된 컴퓨터 시스템을 통신선을 통하여 연결한다. 이를 통해 서로 다른 시스템의 파일을 참조할 수 있고
시스템 간의 통신은 메세지 전달, 원격 프로시저 호출 방식을 사용한다. 

일반적으로 프로세스 처리의 병행성 문제를 논할 때 크게 두 가지로 구분할 수 있다. 

- 단일 프로세스 내에서 병행성 문제
- 여러 프로세스 간의 병행성 문제 

### 단일 프로세스 내의 병행성

단일 프로세스 내에서 병행성은 우선순위 그래프나 Fork/Join 구조, 병행문 등에 의해 설명될 수 있다. 

#### 우선순위 그래프

단일 프로그램 사이에 여러 문장 사이에 우선순위 제약조건이 존재한다는 것

각 정점이 개개의 문자에 대응하는 사이클이 없는 방향 그래프


#### Fork/Join 구조

여러 문장 사이에서 우선순위 관계를 알아낼 수 있는 방법

Fork: 분할

프로그램 내에서 여러 개의 병행 수행을 만들어 낸다. 
하나의 L레이블이 붙여진 문장에서 수행을 시작하고, 다른 하나는 fork 명령어 다음 문장을 계속 수행한다. 

Join: 결힙

병행하는 2개의 연산을 하나로 재결한 시키는 방법을 제공하며, 2개의 연산은 서로 결합되도록 요청해야한다. 

이와 같은 구조는 다중 쓰레드 프로그래밍을 할 떄 주로 이용 된다. 

#### 병행문

1개의 프로세스가 여러 가닥의 병렬 프로세스로 분할되었다가 다시 한 가닥의 프로세스로 결합하는 것을 나타내기 위해 병행문을 사용한다. 

### 프로세스 간의 병행성

프로세스 간의 병행성은 프로세스가 서로 완전히 독립 수행 / 다른 프로세스와 가끔 협력 이렇게 크게 두 가로 나뉜다.

프로세스 간의 상호 협력하는 경우 **비동기적이라고 말하며, 자원을 공유해야 됨.** 

### 동기화와 임계영역

프로세스 동기화는 2개 이상의 프로세스에 대한 처리순서를 결정하는 것을 말한다. 

동시에 사용할 수 없는 공유자원이 있는 경우 프로세스 동기화의 성공 여부는 하나의 자원이 사용되는 공안에 다른 프로세스에서는 사용 불가능 하도록 만드는 운영체제에 달려있음

그리고 각 프로세스는 하나의 일을 수행할 때 다른 프로세스가 접근하지 못하게 하게 하는 영역이 있는데

이걸 **"임계영역"**

그리고 임계영역의 수행은 "상호배제"

다른 프로세스는 이 영역에 들어올 수 없음

임계영역의 수행을 마치고 난 다음에 프로세스의 선택은 "해제 영역"이라고 한다. 

나머지 코드는 "잔류영역"

임계영역 문제의 해결에 있어서는 다음의 세 가지 요구가 만족되어야 한다.

1. 상호배제
2. 진행
3. 제한된 대기 


### Test-and-Set

상호배제의 하드웨어적 해결 방법으로 분리가 불가능한 기계 명령어 

lock을 ㅅ용할 수 있는지 여부를 확인한 후 사용할 수 있는 지 여부를 세팅 


결점 : 많은 프로세스가 절대 영역에 들어가기를 원할 떄 기아발생, 대기 프로세스는 비생산적이고 자원만을 소비하는 busy waiting이 일어나게 된다는 것 

### 세마포어 




