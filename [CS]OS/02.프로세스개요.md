# 프로세스 개요

프로세스란 실행 중인 프로그램을 의미한다.     
프로세스는 CPU가 프로세스의 명령들을 실행하면 실행이 되는 것이다.    
그래서 운영체제는 프로세스들을 생성시키고 종료시키기 위한 다양한 작업과 프로세스들을 실행시키기 위한 스케쥴링 작업을 처리한다. 

## 프로세스의 상태 변화

> 프로세스는 생성, 준비, 실행, 대기, 종료 중 하나의 상태를 가짐

생성 : 작업이 처음 시스템에 주어지면 생성상태에 두고 큐에 넣게 됨.    
작업스풀러 작업의 특성에 맞는 큐를 생성하고, 예상 CPU시간, 우선순위... 를 적어놓음.    
메모리의 이용 가능성과 어떤 장치가 요구되는지 검사

준비 : 생성상태의 프로세스는 준비상태. CPU할당을 기다리는 상태로 전이된다.

대기 : 프로세스가 특정 자원을 할당받을 때까지 또는 I/O 작업이 끝날 떄까지 작업이 보류된믄 상태    

종료 : 모든 처리가 완료되면 프로세스느 종료사태가 되고 사용자에게 반환됨. 

1) 생성 -> 준비
2) 준비 -> 실행
3) 실행 -> 준비 : 우선순위 알고리즘을 택하고 있는 시스템에서 높은 우선순위의 프로세스가 오는 경우
4) 실행 -> 대기 : READ, WRITE, I/O요구, 페이지 교환을 요구하는 작업 명령 등에 의해 일어남. 상대적으로 오랜 시간이 걸리는 작업들이라 그동안 CPU를 다른 프로세스에 할당하여 활용하기 위함.
5) 대기 -> 준비 : 페이지 교환(?이게 뭔지 아직 모르겟음 )의 경우에 페이지 인터럽트 핸들러가 메모리에 그 페이지가 있다는 신호를 보내게 되며, 프로세스는 준비 큐에 놓이게 됨. 
6) 실행 -> 종료 : 프로세스를 성공적으로 끝마친 경우 혹은 강제종료

## 프로세스 제어 블록 (PCB)

프로세스 상태,    
PID,   
PC,    
register(CPU의 레지스터에 해당하는 정보들을 포함 나중에 다시 실행상태로 전이될 때 복구시켜 프로세스의 정확한 수행을 계속할 수 있도록 함.)    
메모리, 프로세스 우선순위, 회계 정보 - 성능 측정과 순위에 대한 목적을 위한 정보 

## 프로세스의 생성과 종료

부모 프로세스, 자식 프로세스

부모프로세스에서 fork() 시스템 호출에 의해 생성됨
부모 프로세스와 주소공간을 복사한 것. 상호간에 통신을 쉽게 해준다. 

자식 프로세스의 자원은 시스템 과부하 방지를 위해 부모 프로세스의 자원 으로 제한

어떤 프로세스 종료시, 자식 프로세스도 연쇄적으로 종료됨    
-> 연속적 종료(cascading termination)

## 프로세스간의 관계

### 독립적 프로세스 

시스템에서 실행 중인 다른 프로세스의 영향을 받지도 않고 주지도 않는 프로세스 
- 다른 프로세스와 공유 안됨
- 프로세스의 실행은 **결정적**임. 입력상태에 의해서만 결정됨.
- **재생가능**, 실행결과는 **같은 입력에 대하여 항상 동일**함. 
- 프로세스의 실행은 타 프로세스와 무관하게 중단되거나 **재시작 될 수 있다.** 


### 유기적 프로세스

다른 프로세스와 영향을 주고받으며 동작
- 다른 프로세스와 상태가 공유됨
- 비결정적. 다른 프로세스에 의해 결과가 좌우될 수 있다. 
- 재생불가능, 같은 입력에 대하여 항상 동일하지 않다. 

## 쓰레드 

프로세스 내에서 다중처리를 위해 작업의 단위를 나눠줌 

제어의 흐름이라고 하고도 하고 프로세스의 실행환경을 각각 공유하지만 실행점이 다르다. 

하나의 쓰레드도 프로세스와 마찬가지로 준비 실행 대기 종료 상태를 가진다. 

여러개의 CPU, 하나의 CPU에 여러개의 코어가 있는 경우라면 다중 쓰레드를 병렬로 처리할 수가 있다. 

## 스케쥴링

여러 가지 작업들의 처리 순서를 결정하는 것

상위, 중간, 하위 단계를 가짐 

상위 : 시스템에 들어오는 작업을 선택하여 프로세스를 생성후 프로세스 준비 큐에 전달하는 역할

하위 : 사용 가능한 CPU를 준비상태의 어느 프로세스에 배당할지를 결정 준비 -> 실행상태로 디스패치 작업 

중간 : 프로세스를 일시적으로 멤뢰에서 제거하여 중지시키거나 다시 활성화 시키 ㅁ


## 스케쥴링 정책

공정성 : 모든 프로세스가 적정 수준에서 CPU 작업을 할 수 있게 하는 것    
균형 : 시스템의 자원이 전부 출분히 활용될 수 있게 

이 두 가지가 기본적인 목표이고 

이외에도 일괄처리 운영체제에서 처리량의 극대화, 반환시간의 최소화
대화형 운영체제에서는 빠른 응답시간과 과다한 대기시간 방지등..

이러한 목표들을 서로 상반된 경우가 있음, 경우에 따라 다르게 가지는 정책-선점 스케줄링 정책, 비선점 스케줄링 정책 등이 있다.

### 선점형 스케줄링 정책 

진행중인 작업에 인터럽트를 걸고 다른 작업에 CPU를 할당할 수 있는 것 

높은 우선순위의 프로세스가 중요할 때

필요한 프로세스가 CPU를 선점할 수 있어 순서 예측이 가능하다. 

대화식 시분할 시스템

### 비선점 

실행이 시작되면 프로세스 자체가 I/O 인터럽트를 걸거나 프로세스를 종료할 때까지 실행상태에 있게 됨 
공적하게 순서에 맞춰 실행됨
응답시간 예측 
짦은 작업이 긴 작업을 기다릴 수 있음
