# 중앙처리장치
> 컴퓨터에서 명령어를 수행하고 데이터를 처리하는 장치    
> 명령어를 해독하고, 그 명령의 실행과정을 제엉한다.   

## 1. 중앙처리장치의 내부 구조

처리장치와 제어장치의 두 부분으로 나뉜다.      
처리장치 : 하나의 산술/논리 연산장치와 많은 내부 레지스터, 레지스터, 산술/ 논리 연산 장치 사이에 데이터를 전송하기 위한 내부 버스        
제어장치 : 프로그램 카운터, 명령어 레지스터, 타이밍 회로, 제어논리 (하드웨어 or 마이크로 프로그램)     

내부 구조는 산술 논리 연산장치,    
처리해야 할 데이터를 일시적으로 기억해 두는 **범용 레지스터**,      
특수한 기능을 수행하는 **특수 레지스터**,     
제어 기능을 수행하는 **제어장치**,   
데이터 전달기능을 수행하는 **내부 버스**    

### 1-1. 산술/논리 연산장치 
CPU에서 연산장치를 산술/논리 연산장치 (ALU)라고 한다.

-> 상태 레지스터, 시프터, 보수기, 산술 및 불 로직    
-> 산술연산회로와 논리연산회로의 결합으로 구성된다.   


### 1-2. 레지스터 세트
CPU 내부의 레지스터의 집합    
-> 레지스터는 기억장치 중에서 액세스 속도가 가장 빠름       
-> CPU에서의 빠른 처리속도를 지원    
-> 가격이 비쌈       

### 1-3. 제어장치

### 1-4. 내부 버스
: ALU와 레지스터 간의 데이터 전송을 위한 데이터 버스 + 제어장치로 부터 발생하는 제어 신호를 위한 버스로 구성된다.   

외부 장치와 데이터 전송을 하기 위해서는 시스템 버스인 주소버스, 데이터버스, 제어버스를 이용한다.    
내부버스는 시스템 버스와 직접 연결지 않으며 반드시 버퍼 레지스터나 시스템버스 인터페이스 회로를 통해 시스템 버스와 연결된다. 

## 2. 레지스터

주기억장치로부터 읽어 온 명령와 데이터를 임시적으로 보관할 수 있는 저장장치가 필요하며, ALU에서 처리된 결과 데이터를 임시적으로 보관할 수 있는 저장장치가 레지스터

범용 레지스터 : 데이터 저장 등 일반적인 목적을 수행함.
특수 레지스터 : 특별한 기능을 수행 (주소 레지스터, 명령어 레지스터, 데이터 레지스터)

###2-1. 범용 레지스터
데이터 저장과 같은 일반적인 목적으로 사용되는 레지스터 
진행 도중 가까운 시간 내에 사용할 데이터나 연산 결과를 일시적으로 기억시키는 데 사용한다. 

### 2-2. 특수 레지스터

#### 2-2-1. 주소 레지스터

- 프로그램 카운터     
다음에 수행될 명렁어가 있는 주소를 가지고 있음   
데이터가 저장되어 있는 기억장치의 주소를 지정해주는 레지스터      

-> 현재 처리하려고 하는 데이터를 인출한 후에는 자동적으로 1 증가, 다음에 수행해야 할 명령어가 저장된 기억장치 주소를 지정해준다. 

만약 분기 명령어가 수행되어 분기가 이루어진 경우에는 프로그램 카운터의 값은 분기되는 주솟값으로 바뀐다.   
명령어를 기억장치로부터 읽기 위해서는 프로그램 카운터의 값이 기억장치 주소 레지스터인 MAR로 전달되고 기억장치 읽기동작이 수행된다. 

- 기억장치주소 레지스터      
다음에 수행될 명령어를 인출하기 위해 현재 프로그램 카운터에 들어 있는 내용이 시스템버스의 주소버스로 출력되기 전에 일시적으로 저장되는 주소 레지스터


- 스택포인터     
스택주소지정방식에서 사용됨.스택 포인터와 스택영역으로 나누어진다.    
스택의 최상위 주소를 지정한다.(스택 영역의 번지를 지정해준다.)    
스택영역은 실제로 데이터가 저장되는 기억장소로 기억장치에 있다.


- 제어주소 레지스터     
제어기억장치에 있는 마이크로 명령어의 주소를 나타낸다.


- 인덱스 레지스터    
인덱스된 주소 지정 방식에서 명령어의 유효주소를 결정할 때 명령어 주소 영역에 대한 상대적인 변윗값을 저장


- 베이스 레지스터     
베이스 레지스터 주소 지정 방식에서 명령어의 유효주소를 결정할 때 명령어의 주소부분에 저장된 변윗값이 더해질 기준주소를 저장하는 데 사용된다.


#### 2-2-2. 명령어 레지스터
Intsruction Register (IR)은 프로그램 수행 중에 **기억장치로부터 가장 최근에 인출된 명령어를 갖고 있다.**    
기억장치로부터 가장 최근에 인출된 명령어란 바로 현재 수행되고 있는 명령어를 뜻한다.     

명령어 레지스터에 있는 명령어 해독기에 의해 해독된 후 그 명령어가 갖는 의미는 제어 신호로서 각 구성요소에 전달된다.

#### 2-2-3. 데이터 레지스터

- 기억장치 버퍼 레지스터   

기억장치로 쓰일 데이터가 기억장치로부터 읽힐 데이터를 임시로 저장하는 레지스터

- 누산기     
데이터를 임시 저장하는 레지스터


## 명령어 사이클

CPU는 기억장치에 기억되어 있는 명령어를 인출하여 실행함으로써 프로그램을 수행한다.    
명령어 1개를 CPU에서 수행하는 데 필요한 전체 수행과정   
이러한 CPU에서의 명령어 수행과정을 살펴보면 다음과 같음.    

1. 명령어 인출 : 기억장치로부터 명령어를 가져오는 것    
2. 명령어 해석 : 인출된 명령어가 무엇을 수행하라고 지시하는지를 알기 위해  명령어를 해독하는 과정   
3. 명령어 실행 : 저장된 연산을 수행   
4. 저장 : 명령어 실행 단계에서 수행된 연산 결과가 레지스터 혹은 기억장치에 쓰여지는 과정   
5. 인터럽트 처리 : 명령어 실행 도중에 입출력 장치와 같은 다른 장치에 의해 인터럽트가 들어오면  이에 합당한 서비스를 제공   

### 명령어 인출 사이클 

PC는 특정 명령어를 제외하고 CPU는 항상 순차적으로 다음 명령어를 읽을 수 있게 프로그램 카운터의 내용을 1 증가시킨다.     
기억장치로부터 인출되니 명령어는 기억장치 버퍼 레지스터를 경유하여 명령어 레지스터에 저장된다. 
